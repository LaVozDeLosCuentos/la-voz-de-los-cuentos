import{t as C}from"./index.C9fBFa-s.js";import{r as f,c as B,w as a,o as c,f as i,e as l,t,a as o,b as s,d as u,g as w,v as I,p as T,h as A}from"./runtime-dom.esm-bundler.C4veuAXy.js";import{_ as D,w as M,A as N,g as O,I as E}from"./_plugin-vue_export-helper.DJHflqop.js";/* empty css                         */const P={__name:"CustomPage",setup(g,{expose:r}){r();const p="https://script.google.com/macros/s/AKfycbyf8f9poDw0Jh26Ieniy0eYZELfDpXwHlC43BWqihDzBCkmExaVhFELYQ2og72CCZHM/exec",e="es",d=f(1),m=f({name:"",story:"",email:"",receiveAll:!0}),n=f(!1),b=f(!1),_=f(!1),v=()=>{d.value<4&&d.value++},S=()=>{d.value>1&&d.value--},k=()=>{m.value.receiveAll=!1,h()};async function y(){m.value.receiveAll&&await fetch(p,{method:"POST",body:JSON.stringify({email:m.value.email,lang:e,story:!0}),headers:{"Content-Type":"text/plain;charset=utf-8"}})}const h=async()=>{v(),n.value=!0,b.value=!1,_.value=!1;try{const V=await fetch("https://script.google.com/macros/s/AKfycbyXxWrBmQDXCDIg5v-bc4YnkDU5YHu43a8HeGVNdoknYDK50bBnLg9gcAbP4Myw14lr/exec",{method:"POST",body:JSON.stringify(m.value),headers:{"Content-Type":"text/plain;charset=utf-8"}});y(),V.ok?b.value=!0:_.value=!0}catch{_.value=!0}finally{n.value=!1}},x={newsletterEndpoint:p,lang:e,currentStep:d,form:m,loading:n,successMessage:b,errorMessage:_,nextStep:v,prevStep:S,submitFormWithoutSubscription:k,addNewsletter:y,submitForm:h,get t(){return C},ref:f,get VButton(){return M},get VInput(){return N},get VContainer(){return O},get VText(){return E}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},F=g=>(T("data-v-12e2592d"),g=g(),A(),g),Y={key:0,class:"custom-page-step"},H={class:"custom-page-step__buttons"},U={key:1,class:"custom-page-step"},W=F(()=>l("span",{class:"custom-page-mandatory"},"*",-1)),J={class:"custom-page-step__buttons"},K={key:2,class:"custom-page-step"},L={class:"custom-page-step__buttons"},X={key:3,class:"custom-page-step"},q={class:"custom-page-step__buttons"},z={key:4,class:"custom-page-loader"},Q={key:5,class:"custom-page-success-message"},Z={key:6,class:"custom-page-error-message"};function j(g,r,p,e,d,m){return c(),B(e.VContainer,{size:"xs",class:"custom-page"},{default:a(()=>[e.currentStep===1?(c(),i("div",Y,[l("h2",null,t(e.t("page.custom.input.name")),1),o(e.VInput,{"aria-label":`Input ${e.t("page.custom.input.name")}`,type:"text",modelValue:e.form.name,"onUpdate:modelValue":r[0]||(r[0]=n=>e.form.name=n)},null,8,["aria-label","modelValue"]),l("div",H,[o(e.VButton,{onClick:e.nextStep,disabled:!e.form.name},{default:a(()=>[s(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):u("",!0),e.currentStep===2?(c(),i("div",U,[l("h2",null,[s(t(e.t("page.custom.input.story"))+" ",1),W]),w(l("textarea",{"aria-label":"Area de texto para describir el cuento","onUpdate:modelValue":r[1]||(r[1]=n=>e.form.story=n),required:""},null,512),[[I,e.form.story]]),l("div",J,[o(e.VButton,{onClick:e.prevStep},{default:a(()=>[s(t(e.t("page.custom.button.prev")),1)]),_:1}),o(e.VButton,{onClick:e.nextStep,disabled:!e.form.story},{default:a(()=>[s(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):u("",!0),e.currentStep===3?(c(),i("div",K,[l("h2",null,t(e.t("page.custom.input.email")),1),o(e.VInput,{"aria-label":"Email",type:"email",modelValue:e.form.email,"onUpdate:modelValue":r[2]||(r[2]=n=>e.form.email=n),placeholder:"abc@email.com"},null,8,["modelValue"]),l("div",L,[o(e.VButton,{onClick:e.prevStep},{default:a(()=>[s(t(e.t("page.custom.button.prev")),1)]),_:1}),o(e.VButton,{onClick:e.nextStep,disabled:!e.form.email||e.form.email.indexOf("@")===-1||e.form.email.indexOf(".")===-1},{default:a(()=>[s(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):u("",!0),e.currentStep===4&&!e.loading&&!e.successMessage?(c(),i("div",X,[o(e.VText,null,{default:a(()=>[s(t(e.t("page.custom.input.newsletter")),1)]),_:1}),l("div",q,[o(e.VButton,{onClick:e.submitForm},{default:a(()=>[s(t(e.t("page.custom.button.accept")),1)]),_:1}),o(e.VButton,{onClick:e.submitFormWithoutSubscription},{default:a(()=>[s(t(e.t("page.custom.button.decline")),1)]),_:1})])])):u("",!0),e.loading?(c(),i("div",z,[o(e.VText,null,{default:a(()=>[s(t(e.t("page.custom.button.loading")),1)]),_:1})])):u("",!0),e.successMessage?(c(),i("div",Q,[o(e.VText,null,{default:a(()=>[s(t(e.t("page.custom.button.success")),1)]),_:1})])):u("",!0),e.errorMessage?(c(),i("div",Z,[o(e.VText,null,{default:a(()=>[s(t(e.t("page.custom.button.error")),1)]),_:1})])):u("",!0)]),_:1})}const te=D(P,[["render",j],["__scopeId","data-v-12e2592d"]]);export{te as default};
