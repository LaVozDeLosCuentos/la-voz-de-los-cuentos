window.dataLayer=window.dataLayer||[];function i(){dataLayer.push(arguments)}i("js",new Date);i("config","G-PXYY4HM36E");var m=function(){i("consent","update",{analytics_storage:"granted"}),localStorage.setItem("cookieConsent","granted"),document.querySelector(".cookie-consent").style.display="none"},y=function(){localStorage.setItem("cookieConsent","rejected"),document.querySelector(".cookie-consent").style.display="none"};document.querySelector(".cookie-consent-button").addEventListener("click",()=>{m()});document.querySelector(".cookie-consent-reject-button").addEventListener("click",()=>{y()});document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("cookieConsent")||(document.querySelector(".cookie-consent").style.display="block")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("ServiceWorker registration successful with scope: ",t.scope)},t=>{console.log("ServiceWorker registration failed: ",t)})});(function(){if(window.location.hostname==="lavozdeloscuentos.es"){var e=window.location.href;if(e.startsWith("http://")){var s=e.replace("http://","https://");window.location.replace(s)}else{e.endsWith("/")&&(e=e.slice(0,-1));var c=new URL(e);if(c.hostname.startsWith("www.")){var n=e.replace("www.","");window.location.replace(n)}}}})();let o=!1;document.getElementById("hamburger-menu").addEventListener("click",g);document.getElementById("nav-list").classList.toggle("main-header__nav-list--open",o);function g(){o=!o,document.getElementById("nav-list").classList.toggle("main-header__nav-list--open",o),document.getElementById("backdrop").classList.toggle("backdrop--visible",o),document.body.classList.toggle("no-scroll",o)}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("newsletter-form-footer"),e=document.getElementById("email-footer"),s=document.getElementById("email-error-footer"),c=document.getElementById("success-message-footer"),n=document.getElementById("error-message-footer"),d=document.getElementById("newsletter-footer");t.addEventListener("submit",async a=>{a.preventDefault();const l=e.value.trim();if(s.style.display="none",n.style.display="none",!u(l)){s.style.display="block";return}try{const r=await fetch("https://script.google.com/macros/s/AKfycbxzhVGv1wPrLwYU9Inq0Pbx9Bm76LBl8RX9oyWSdaEcaCWyschEyNgJbMNS8XUYj7Pi/exec",{method:"POST",body:JSON.stringify({email:l}),headers:{"Content-Type":"text/plain;charset=utf-8"}});if(!r.ok)throw new Error("Network response was not ok");(await r.json()).result==="success"?(d.style.display="none",c.style.display="block"):n.style.display="block"}catch(r){console.error("Error:",r),n.style.display="block"}});function u(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(a).toLowerCase())}});
